<!DOCTYPE html>
<html lang="en">

	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="renderer" content="webkit">
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="../css/hotlineroots.css">
		<link href="../css/newmap.css" type="text/css" rel="stylesheet">
		<!--[if lte IE 9]><link rel="stylesheet" href="../css/newmap.ie.css" /><![endif]-->
		<script type="text/javascript" src='../js/respond.js'></script>

		<title>热线溯源</title>
	</head>

	<body onload="mapInit();">
		@@include('./include/header.html')
		<div id="mainwrap">
			<div id="map" class="mapdiv">
			</div>
			<div id="search">
				<div class="searchform">
					<form action="" method="post">
						<input type="text" id="" value="" class="searchtext" placeholder="输入电话号码查询" />
						<input type="submit" value="" class="searchbtn" />
					</form>
				</div>
				<div class="searchcontent">
					<div class="sctop">
						<div class="sctab">
							<div class="jzxx active">
								机主信息
							</div>
							<div class="jdxx scmid">
								街道信息
							</div>
							<div class="qsxx">
								亲属信息
							</div>
						</div>
						<div class="sccon">
							<div class="jzxxdiv active">
								<div class="jzmsg">
									<p>
										<span class="jzmsgs">机主姓名 : </span>
										<span id="name"></span>
									</p>
									<p>
										<span class="jzmsgs">机主年龄 : </span>
										<span id="age"></span>
									</p>
									<p>
										<span class="jzmsgs">机主性别 : </span>
										<span id="sex"></span>
									</p>
									<p>
										<span class="jzmsgs">过往病历 : </span>
										<span id="ill"></span>
									</p>
								</div>
								<div class="callmsg">
									<div class="cmtitle">
										<div class="cmicon">

										</div>
										<div class="cmtst">
											来电记录
										</div>
									</div>
									<table class="msgtable">
										<tr>
											<th class="ldsj">来电时间</th>
											<th class="ldnr">来电内容</th>
										</tr>
									</table>
								</div>

							</div>
							<div class="jdxxdiv">
								<span class="divmsg">街道 : </span> 11111111111111
							</div>
							<div class="qsxxdiv">
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
								<span class="divmsg">姓名 : </span>2222222222222<br />
							</div>
						</div>

					</div>
					<div class="scbtm">
						<div class="toggle">

						</div>
					</div>
				</div>
			</div>
			<div id="loading">
				<img src="../images/loading.gif"/>
			</div>
		</div>
		<script type="text/javascript" src='../js/lib.js'></script>
		<script type="text/javascript" src='../js/jquery.nicescroll.min.js'></script>
		<script type="text/javascript" src='../js/NewMap.js'></script>
		<script type="text/javascript" src='../js/NExtWMTSLayer.js'></script>
		<script type="text/javascript" src='../js/hotlineroots.js'></script>
		<script type="text/javascript">
			
		
		
		
			var mymap;
			var layer;
			var layer_label;
			var layerraster;
			var layerraster_label;

			function mapInit() {
				//地图实例化  
				mymap = new NMap("map");
				//图层参数设置  
				var lyrOptionswmts = {
					tileSize: new NXY(256, 256),
					tileOrigin: new NXY(-180, 90),
					maxExtent: new NBounds(-180.0, -90.0, 180.0, 90.0),
					resolutions: [0.010986328125, 0.0054931640625, 0.00274658203125, 0.001373291015625, 0.0006866455078125, 0.00034332275390625, 0.000171661376953125, 0.0000858306884765625, 0.00004291534423828125, 0.000021457672119140625, 0.0000107288360595703125, 0.00000536441802978515625, 0.000002682209014892578125, 0.0000013411045074462890625],
					serverResolutions: {
						'7': 0.010986328125,
						'8': 0.0054931640625,
						'9': 0.00274658203125,
						'10': 0.001373291015625,
						'11': 0.0006866455078125,
						'12': 0.00034332275390625,
						'13': 0.000171661376953125,
						'14': 0.0000858306884765625,
						'15': 0.00004291534423828125,
						'16': 0.000021457672119140625,
						'17': 0.0000107288360595703125,
						'18': 0.00000536441802978515625,
						'19': 0.000002682209014892578125,
						'20': 0.0000013411045074462890625
					}
				};
				//矢量图层
				//潍坊市图层 18-20配置信息
				var whlayeroption = {
					format: "image/png",
					units: "dd",
					projection: "EPSG:4490",
					layer: "WFVectorMap",
					style: "Default",
					serviceMode: 'KVP',
					tileMatrixSet: "TileMatrixSet_0"
				};
				//省图层 2-17配置信息
				var provinceoption = {
					format: "image/png",
					units: "dd",
					projection: "EPSG:4490",
					layer: "0",
					style: "default",
					serviceMode: 'KVP',
					tileMatrixSet: "taishannew"
				};

				var configopt = [{
					url: 'http://124.128.48.210/tileservice/sdpubmap',
					z: [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
					params: provinceoption
				}, {
					url: 'http://112.253.20.180:9898/newmap/tianditu/wfmap/WFVectorMap/wmts?',
					z: [18, 19, 20],
					params: whlayeroption
				}];
				layer = new NExtWMTSLayer("WMTS", "http://112.253.20.180:9898/newmap/tianditu/wfmap/WFVectorMap/wmts?", lyrOptionswmts, configopt);
				mymap.addLayer(layer);

				//矢量注记图层
				//潍坊市注记层配置信息
				var whoption_label = {
					format: "image/png",
					units: "dd",
					projection: "EPSG:4490",
					layer: "WFVectorMapAnno",
					style: "Default",
					serviceMode: 'KVP',
					tileMatrixSet: "TileMatrixSet_0"
				};

				var configopt_label = [{
					url: 'http://112.253.20.180:9898/newmap/tianditu/wfmap/WFVectorMapAnno/wmts',
					z: [18, 19, 20],
					params: whoption_label
				}];
				layer_label = new NExtWMTSLayer("WMTS", "http://112.253.20.180:9898/newmap/tianditu/wfmap/WFVectorMapAnno/wmts", lyrOptionswmts, configopt_label);
				layer_label.isBasicLayer = false;
				mymap.addLayer(layer_label);

				//影像图层
				//潍坊市影像18-20配置信息
				var rcrasteroption = {
					format: "image/png",
					units: "dd",
					projection: "EPSG:4490",
					layer: "WFRasterMap",
					style: "Default",
					serviceMode: 'KVP',
					tileMatrixSet: "TileMatrixSet_0"
				};
				//山东省影像 2-17配置信息
				var sdrasteroption = {
					format: "image/jpeg",
					units: "dd",
					projection: "EPSG:4490",
					layer: "0",
					style: "default",
					serviceMode: 'KVP',
					tileMatrixSet: "tianditu2013"
				};

				var configrasteropt = [{
					url: 'http://www.sdmap.gov.cn/tileservice/SDRasterPubMap',
					z: [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
					params: sdrasteroption
				}, {
					url: 'http://112.253.20.180:9898/newmap/tianditu/wfmap/WFRasterMap/wmts?',
					z: [18, 19, 20],
					params: rcrasteroption
				}];
				layerraster = new NExtWMTSLayer("WMTSraster", "ttp://112.253.20.180:9898/newmap/tianditu/wfmap/WFRasterMap/wmts?", lyrOptionswmts, configrasteropt);
				layerraster.isBasicLayer = true;
				mymap.addLayer(layerraster);

				//影像注记
				//潍坊市注记层配置信息
				var rcraster_label = {
					format: "image/png",
					units: "dd",
					projection: "EPSG:4490",
					layer: "WFRasterMapAnno",
					style: "Default",
					serviceMode: 'KVP',
					tileMatrixSet: "TileMatrixSet_0"
				};
				//山东影像注记
				var sdraster_label = {
					format: "image/png",
					units: "dd",
					projection: "EPSG:4490",
					layer: "0",
					style: "default",
					serviceMode: 'KVP',
					tileMatrixSet: "taishannew"
				};

				var configraster_label = [{
					url: 'http://www.sdmap.gov.cn/tileservice/SDPubRasterNoteMapall',
					z: [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
					params: sdraster_label
				}, {
					url: 'http://112.253.20.180:9898/newmap/tianditu/wfmap/WFRasterMapAnno/wmts?',
					z: [18, 19, 20],
					params: rcraster_label
				}];
				layerraster_label = new NExtWMTSLayer("WMTS", "http://112.253.20.180:9898/newmap/tianditu/wfmap/WFRasterMapAnno/wmts?", lyrOptionswmts, configraster_label);
				layerraster_label.isBasicLayer = false;
				layerraster_label.visible = false;
				mymap.addLayer(layerraster_label);

				mymap.moveTo(new NXY(119.1061, 36.7201), 4);

				//				mymap.addControl(new NPanZoomBarControl({
				//					useZoomBarTag: true
				//				}));
				//				mymap.addControl(new NPositionControl());
				mymap.setMode("dragzoom");
			};

			//			function showRaster() {
			//				mymap.setBasicLayer(layerraster);
			//				layer_label.visible = false;
			//				layerraster_label.visible = true;
			//			}
			//
			//			function drawPolygon() {
			//				var modeOptions = {
			//					strokeColor: "red",
			//					strokeWidth: 2,
			//					strokeOpacity: 0.8,
			//					strokeStyle: "dash",
			//					fillColor: "yellow",
			//					fillOpacity: 0.2,
			//					editable: false
			//				};
			//				mymap.setMode("drawline", modeOptions);
			//				return;
			//				var modeOptions = {
			//					strokeColor: "red",
			//					strokeWidth: 2,
			//					strokeOpacity: 0.8,
			//					strokeStyle: "dash",
			//					fillColor: "yellow",
			//					fillOpacity: 0.2,
			//					editable: false
			//				}
			//				mymap.setMode("drawpolygon", modeOptions);
			//				mymap.on('drawfeatureend', getpolyfeature);
			//			}

			//			function getpolyfeature(e) {
			//				var featureobj = e.feature;
			//
			//				var points = featureobj.getPoints();
			//				var strpoint = '';
			//				for(var i = 0; i < points.length; i++) {
			//					var apoint = points[i];
			//					strpoint += apoint.x + ',' + apoint.y + ';';
			//				}
			//				alert(strpoint);
			//				mymap.off('drawfeatureend', getpolyfeature);
			//				mymap.setMode("dragzoom");
			//			}
		</script>
	</body>

</html>